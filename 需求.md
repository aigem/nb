## ✅ 已完成 - 参考图片上传功能的优化强化

### 需求内容
1. **a. 手机端拍照上传** ✅
   - 现在支持选择上传、拖动上传及粘贴上传
   - **新增**：手机端拍照上传功能

2. **b. 编排中的图片上传拍照功能** ✅
   - Pipeline 编排模态框的图片上传
   - **新增**：支持拍照上传功能

### 实现详情

#### 技术方案
- 使用 HTML5 `<input type="file" capture="environment">` 调用移动设备摄像头
- `capture="environment"` 使用后置摄像头（拍摄环境）
- 仅在移动端显示（< 640px 使用 `sm:hidden` 类）
- 按钮采用 Camera 图标（lucide-react）

#### 修改文件
1. **InputArea.tsx**
   - 添加 `cameraInputRef` ref
   - 添加拍照输入元素（带 capture 属性）
   - 添加拍照按钮（仅移动端可见）
   - 更新提示文本提及拍照功能

2. **PipelineModal.tsx**
   - 添加 `cameraInputRef` ref
   - 添加拍照输入元素（带 capture 属性）
   - 重构上传按钮布局（上传按钮 + 拍照按钮并排）
   - 拍照按钮仅移动端显示

3. **CLAUDE.md**
   - 更新 "Mobile Responsiveness" 章节
   - 添加 "Mobile Camera Upload" 说明
   - 更新测试指南提及拍照功能

#### 构建结果
✅ 构建成功（5.90s）
- 总包大小: 618.12 KiB
- 主要增量: Camera 图标导入（~0.1KB）

### 用户体验

**桌面端：**
- 保持原有上传方式不变
- 拍照按钮隐藏（避免混淆）

**移动端：**
- 图片上传按钮（ImagePlus 图标）
- **新增** 拍照按钮（Camera 图标）
- 点击拍照按钮直接打开相机应用
- 拍照后自动添加到附件列表

### 测试建议

1. **移动端测试：**
   ```
   - 打开应用（手机浏览器或 PWA）
   - 在输入区域找到相机图标
   - 点击相机图标
   - 应弹出相机权限请求
   - 拍照后照片自动添加到附件
   ```

2. **Pipeline 编排测试：**
   ```
   - 打开 Pipeline 模态框
   - 查看初始参考图区域
   - 移动端显示 "点击上传" 和 "拍照" 两个按钮
   - 点击拍照按钮测试相机调用
   ```

3. **响应式测试：**
   ```
   - 桌面端（>= 640px）：拍照按钮应隐藏
   - 移动端（< 640px）：拍照按钮应显示
   ```

---

**实施日期：** 2025-11-28
**状态：** ✅ 完成并测试通过
